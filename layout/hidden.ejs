<%
const { layout } = page
// 是否使用 Heti 布局插件
const isUsingHeti = theme.plugins.heti?.enable

function articleClass() {
  var str = `md-text content${scrollreveal(' ')}`
  if (isUsingHeti) {
    str += ' heti'
  }
  return str
}

function layoutDiv() {
  var el = ''
  el += `<article class="${articleClass()}">`
  if (page.content && page.content.length > 0) {
    el += page.content
  }
  if (layout === 'post') {
    el += partial('_partial/main/article/article_footer')
  }
  el += `</article>`
  if (layout === 'post' || page.wiki) {
    el += partial('_partial/main/article/read_next')
  }
  if (layout === 'post') {
    el += partial('_partial/main/article/related_posts')
  }
  el += partial('_partial/comments/layout')
  return el
}
%>

<%- layoutDiv() %>
